[
  {
    "title": "handle 404",
    "description": "wei",
    "date": "2021-09-01",
    "url": "handle-404",
    "html": "<h1 id=\"handle-404\">handle 404</h1>\n<p><time datetime=\"2021-09-01\">2021-09-01</time></p>\n<p><em class=\"description\">wei</em></p>\n<p>vercel デプロイ時、↓で 404 のハンドリングができず 500 が返ってしまってた ( ローカルだとOK )。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">try</span> {\n  fs.<span class=\"hljs-title function_\">statSync</span>(filePath);\n} <span class=\"hljs-keyword\">catch</span> (error) {\n  <span class=\"hljs-keyword\">if</span> (error.<span class=\"hljs-property\">code</span> === <span class=\"hljs-string\">&#x27;ENOENT&#x27;</span>) {\n    reply.<span class=\"hljs-title function_\">code</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">view</span>(<span class=\"hljs-string\">&#x27;./templates/page/404.njk&#x27;</span>);\n  }\n}\n\n<span class=\"hljs-title function_\">getPostInfo</span>({ fileName, <span class=\"hljs-attr\">withHtml</span>: <span class=\"hljs-literal\">true</span> }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">postInfo</span>) =&gt;</span> {\n...\n</code></pre>\n<p>↓で解決。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">if</span> (fs.<span class=\"hljs-title function_\">existsSync</span>(filePath)) {\n  <span class=\"hljs-title function_\">getPostInfo</span>({ fileName, <span class=\"hljs-attr\">withHtml</span>: <span class=\"hljs-literal\">true</span> }).<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\">(<span class=\"hljs-params\">postInfo</span>) =&gt;</span> {\n  ...\n} <span class=\"hljs-keyword\">else</span> {\n  reply.<span class=\"hljs-title function_\">code</span>(<span class=\"hljs-number\">404</span>).<span class=\"hljs-title function_\">view</span>(<span class=\"hljs-string\">&#x27;./templates/page/404.njk&#x27;</span>);\n}\n</code></pre>\n",
    "prevPost": {
      "title": "トゥードゥー",
      "url": "%E3%83%88%E3%82%A5%E3%83%BC%E3%83%89%E3%82%A5%E3%83%BC"
    },
    "nextPost": null
  },
  {
    "title": "トゥードゥー",
    "description": "todo",
    "date": "2021-08-30",
    "url": "%E3%83%88%E3%82%A5%E3%83%BC%E3%83%89%E3%82%A5%E3%83%BC",
    "html": "<h1 id=\"トゥードゥー\">トゥードゥー</h1>\n<p><time datetime=\"2021-08-30\">2021-08-30</time></p>\n<p><em class=\"description\">todo</em></p>\n<h2 id=\"ci-✅\">CI ✅</h2>\n<p>テスト =&gt; ビルド =&gt; Vercel デプロイ</p>\n<ul>\n<li>Circle CI?</li>\n<li>GitHub Actions? ✅</li>\n</ul>\n<h2 id=\"404css-✅\">404.css ✅</h2>\n<h2 id=\"service-worker\">service worker</h2>\n<ul>\n<li>リビジョン設定 ✅</li>\n<li>workbox の <code>ignoreURLParametersMatching: [/^utm_/, /^fbclid$/]</code> これなんだっけ？</li>\n</ul>\n<h2 id=\"ページ機能\">ページ機能</h2>\n<ul>\n<li>前の記事次の記事？ ✅<ul>\n<li>スタイル ✅</li>\n</ul>\n</li>\n<li>カテゴリ？タグ？</li>\n</ul>\n<h2 id=\"スタイル\">スタイル</h2>\n<ul>\n<li>hightlight.js いまいち？ ✅<ul>\n<li>a11y theme とりあえず ✅</li>\n</ul>\n</li>\n<li>ページの下の方 <code>padding-bottom</code> もうちょいいる？ ✅</li>\n</ul>\n<h2 id=\"ga\">GA</h2>\n<p>既存からコピペするだけ</p>\n<h2 id=\"ドメイン設定\">ドメイン設定</h2>\n<ul>\n<li>iiyatsu.hrfmmymt.com</li>\n<li>既存 ( Firebase Hosting ) をキャンセル</li>\n<li>Vercel に移行</li>\n</ul>\n<h2 id=\"imagemin\">imagemin</h2>\n<p>画像の最適化で使っている imagemin 最新 ver. が ESM を使っているので、対応しなければならない。\n<a href=\"https://gist.github.com/sindresorhus/a39789f98801d908bbc7ff3ecc99d99c\">対応方法</a></p>\n<h3 id=\"懸念\">懸念</h3>\n<ul>\n<li>他の既存コードの修正がめんどくさそう<ul>\n<li>TS のとことか</li>\n<li>他の pkg は？</li>\n</ul>\n</li>\n<li>Vercel でのデプロイ</li>\n</ul>\n<p>まあでも今後を考えるとやった方がよい</p>\n",
    "prevPost": {
      "title": "hello, world!",
      "url": "hello-world!"
    },
    "nextPost": {
      "title": "handle 404",
      "url": "handle-404"
    }
  },
  {
    "title": "hello, world!",
    "description": "hello,",
    "date": "2021-08-29",
    "url": "hello-world!",
    "html": "<h1 id=\"hello-world\">hello, world!</h1>\n<p><time datetime=\"2021-08-29\">2021-08-29</time></p>\n<p><em class=\"description\">hello, world!</em></p>\n<p>aaaaaaaaaaa</p>\n<h2 id=\"img\">img</h2>\n<p><img src=\"https://lh3.googleusercontent.com/pw/AM-JKLVXUJtGnnBBN5SaVbSpSAynOiedhj-Jmj5WikYx2HXdnkFW8sRzZzsVoa-UGd5kDTAFQEkUGssvtbQLxqZSkmTeq6Cy_vPMhAsdi_L8NaWItXn3E0X98VtzrHFHS-NGijH4mxkitmbWn63ESli4Rvlndg\" alt=\"eye-catch\" width=\"780\" height=\"1386\" loading=\"lazy\" /></p>\n<ol>\n<li>画像を所定ディレクトリに配置</li>\n<li>配置した画像を最適化する</li>\n<li>最適化した画像を Google フォトに上げる</li>\n<li>Google フォトからパーマリンクを取得</li>\n<li>markdown 記述↑↑</li>\n</ol>\n<h2 id=\"video\">video</h2>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;video-wrapper&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">video</span> <span class=\"hljs-attr\">controls</span>\n    <span class=\"hljs-attr\">preload</span>=<span class=\"hljs-string\">&quot;metadata&quot;</span>\n    <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;640&quot;</span>\n    <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;360&quot;</span>\n    <span class=\"hljs-attr\">poster</span>=<span class=\"hljs-string\">&quot;https://user-images.githubusercontent.com/4241290/131988834-79b76fd9-345e-4a58-84cd-1ab4809df1f6.png&quot;</span>\n    <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;video-test&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">source</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://user-images.githubusercontent.com/4241290/131988806-9bf0744d-7069-4c37-a70b-466460caa26f.mp4&quot;</span>\n      <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;video/mp4&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">fallback</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>This browser does not support the video element.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">video</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n</code></pre>\n<div class=\"video-wrapper\">\n  <video controls\n    preload=\"metadata\"\n    width=\"640\"\n    height=\"360\"\n    layout=\"responsive\"\n    poster=\"https://user-images.githubusercontent.com/4241290/131988834-79b76fd9-345e-4a58-84cd-1ab4809df1f6.png\"\n    title=\"video-test\">\n    <source src=\"https://user-images.githubusercontent.com/4241290/131988806-9bf0744d-7069-4c37-a70b-466460caa26f.mp4\"\n      type=\"video/mp4\" />\n    <div fallback>\n      This browser does not support the video element.\n    </div>\n  </video>\n</div>\n\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">iframe</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD&quot;</span>\n  <span class=\"hljs-attr\">sandbox</span>=<span class=\"hljs-string\">&quot;allow-scripts allow-same-origin&quot;</span>\n  <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;300&quot;</span>\n  <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;380&quot;</span>\n  <span class=\"hljs-attr\">frameborder</span>=<span class=\"hljs-string\">&quot;0&quot;</span>\n  <span class=\"hljs-attr\">allow</span>=<span class=\"hljs-string\">&quot;encrypted-media&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">iframe</span>&gt;</span>\n</code></pre>\n<iframe src=\"https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD\"\n  sandbox=\"allow-scripts allow-same-origin\"\n  width=\"300\"\n  height=\"380\"\n  frameborder=\"0\"\n  allow=\"encrypted-media\"></iframe>",
    "prevPost": {
      "title": "これはもう帰省 北九州",
      "url": "trip-to-kitakyushu"
    },
    "nextPost": {
      "title": "トゥードゥー",
      "url": "%E3%83%88%E3%82%A5%E3%83%BC%E3%83%89%E3%82%A5%E3%83%BC"
    }
  },
  {
    "title": "これはもう帰省 北九州",
    "description": "書いていき",
    "date": "2019-07-10",
    "url": "trip-to-kitakyushu",
    "html": "<h1 id=\"これはもう帰省-北九州\">これはもう帰省 北九州</h1>\n<p><time datetime=\"2019-07-10\">2019-07-10</time></p>\n<p><em class=\"description\">書いていき</em></p>\n<p>こんにちは、揚州商人です。<br>GW に福岡県北九州市に行ってきた（1 年振り n 度目）ので記録します。<br>ちなみにこれ書き始めたのが 2019 年 5 月 23 日で今は同年 7 月 10 日です。書いてる途中で書いてたことを忘れていました。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-01.png=780x439\" alt=\"羽田空港のデッキにて\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>まず 4 月 30 日に自分と娘だけが羽田を発ち、北九州の妻実家に滞在。<br>二泊した後、妻が合流するのは 5 月 2 日で、5 月 5 日に家族三人みんなで帰京という特殊な旅程を組みました。<br>4 月 30 日、5 月 1 日 \b の二泊が妻不在で、娘とのふたり旅気分。義父義母義妹（年上なんだけど妻の妹だから義妹でいいのか？）がいる環境なので、ある部分安心ながらも若干不安な心持ちで過ごすことになりました。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-02.jpg=780x585\" alt=\"資さんうどんのカツとじ丼とかしわおにぎりとミニうどん\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>北九州空港到着後、いつも立ち寄る空港通りの資さんうどんで昼食。そしてその直後娘は車内で嘔吐しました。父に似て乗り物ダメかもですね。<br>これもいつか記すかもしれませんが、父は先日ディズニーランドのイッツ・ア・スモール・ワールドとかいう船で酔って膝から崩れ落ちて死にました。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-03.jpg=780x1040\" alt=\"妻実家の猫\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>妻の実家ではかなり臆病な猫を飼っていて、これまでは触れ合うのもままならない感じだったのですが、今回かなり間合いを詰められました。ちょいちょい触れたし寄ってきた。たぶん、知らん人カテゴリの中では最も心を許されているのではなかろうか。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-04.jpg=780x1040\" alt=\"久留米ラーメン\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-05.jpg=780x1040\" alt=\"いちご狩り1\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-06.jpg=780x1385\" alt=\"いちご狩り2\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>前半のメインイベント、いちご狩り。蛙いた。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-07.jpg=780x585\" alt=\"海1\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-08.jpg=780x585\" alt=\"海2\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>海。生き物いなかった。</p>\n<div class=\"amp-video-wrapper\">\n  <amp-video controls\n    preload=\"metadata\"\n    width=\"640\"\n    height=\"360\"\n    layout=\"responsive\"\n    poster=\"/static/videos/poster/kitakyushu-2019-01.png\"\n    title=\"イカ\">\n    <source src=\"/static/videos/webm/kitakyushu-2019-01.webm\"\n      type=\"video/webm\" />\n    <source src=\"/static/videos/mp4/kitakyushu-2019-01.mp4\"\n      type=\"video/mp4\" />\n    <div fallback>\n      <p>This browser does not support the video element.</p>\n    </div>\n  </amp-video>\n</div>\n\n<p>透明なイカ動いてる〜</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-09.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" />\n辛麺屋桝元 5 辛こんにゃく麺をご覧いただきつつ。</p>\n<p>滞在後半戦は妻と合流して法事。これがこの滞在の本当のメインながらも、晒せる写真は一切なかった。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-10.jpg=780x439\" alt=\"うさぎ\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>到津の森動物園</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-11.jpg=780x585\" alt=\"資さんうどんのカレーとざる蕎麦\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>もう一回資さんうどん。生姜ついてるタイプのざる蕎麦。</p>\n<p><img src=\"/static/img/posts/kitakyushu-2019-12.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>北九州空港からさようなら。</p>\n<p>思ったのは、三歳児と二人きりで外泊するのは二泊が限界かなということですね。あのふた晩はなんというか、かなり特殊な緊張感がありました。妻と LINE のビデオ通話をつないだりして、「なんとかやり過ごした感」が強いです。反面、ある程度近場の一泊くらいなら二人きりでもいけるのではという自信も少しつきました。</p>\n<p>夜寝んねの時寂しそうだったけど頑張ったね。えらかったね。</p>\n",
    "prevPost": {
      "title": "ワンス・アポン・ア・タイム・イン金沢",
      "url": "trip-to-kanazawa"
    },
    "nextPost": {
      "title": "hello, world!",
      "url": "hello-world!"
    }
  },
  {
    "title": "ワンス・アポン・ア・タイム・イン金沢",
    "description": "いつかのやつ",
    "date": "2019-03-06",
    "url": "trip-to-kanazawa",
    "html": "<h1 id=\"ワンス・アポン・ア・タイム・イン金沢\">ワンス・アポン・ア・タイム・イン金沢</h1>\n<p><time datetime=\"2019-03-06\">2019-03-06</time></p>\n<p><em class=\"description\">いつかのやつ</em></p>\n<p>こんにちは。<br>初めて金沢に行ってきました。</p>\n<p><img src=\"/static/img/posts/20190306_01.jpg=780x1040\" alt=\"近江町市場の定食\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>駅前のホテルに荷物を置いて、バスに乗って近江町市場へ。<br>混んでる中のベビーカー利用で直接ではないけどうっすら文句言われつつ。そして運転荒くて辛かった。<br>市場も滅茶苦茶に混んでて辛かった。なんか普通の定食屋にはスッと入れた。</p>\n<p><img src=\"/static/img/posts/20190306_02.jpg=780x1040\" alt=\"兼六園 ことじ灯籠\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_03.jpg=780x1040\" alt=\"兼六園 雪吊り\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>バスに乗って兼六園へ。混んでて運転荒くて辛かった。<br>有名そうなやつを見た。そういえば前日から雪が降っていて、少し積もっていたので娘と小さな雪だるまを作ったりして遊んだ。</p>\n<p><img src=\"/static/img/posts/20190306_04.jpg=780x1040\" alt=\"蟹鍋\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>泊まるホテルの隣のホテルに併設されてる居酒屋で夕食。初日終わり。</p>\n<p>翌日はいったん荷物を金沢駅に預けて、21世紀美術館。バス混んでて運転荒くて辛かった。以下写真ペタペタ。</p>\n<p><img src=\"/static/img/posts/20190306_05.jpg=780x1040\" alt=\"21世紀美術館 外にあるいろんな色のやつ 4セット\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_06.jpg=780x1040\" alt=\"21世紀美術館 外にあるいろんな色のやつ 4セット\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_07.jpg=780x1040\" alt=\"21世紀美術館 外にあるいろんな色のやつ 4セット\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_08.jpg=780x585\" alt=\"21世紀美術館 外にあるいろんな色のやつ 4セット\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_09.jpg=780x1040\" alt=\"21世紀美術館 水のやつ 上から\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_10.jpg=780x1040\" alt=\"21世紀美術館 水のやつ 下から\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20190306_11.jpg=780x585\" alt=\"21世紀美術館 ワークショップ\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>ダンボールの切れ端を使って、ハサミで切ったりのりで貼ったりして制作する無料参加のワークショップがやってて、娘と参加した。なんかいろんなもの作った。</p>\n<p><img src=\"/static/img/posts/20190306_12.jpg=780x1040\" alt=\"21世紀美術館 併設カフェのパスタ\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>美術館では<a href=\"https://www.kanazawa21.jp/data_list.php?g=45&amp;d=1762\">「コレクション展 アジアの風景」</a>という展覧会を見ました。たまたまだけどこういうアジア系のを集めた展覧会、最近よく見る。<br>美術館を後にして、さすがにバスは懲りたのでタクシー乗って金沢駅へ。荷物回収して終わり。</p>\n<p><img src=\"/static/img/posts/20190306_13.jpg=780x1040\" alt=\"金沢駅 白山そばのかけ蕎麦\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>なんとなくかけ蕎麦食べた。</p>\n",
    "prevPost": {
      "title": "論理無職の日々",
      "url": "20181102"
    },
    "nextPost": {
      "title": "これはもう帰省 北九州",
      "url": "trip-to-kitakyushu"
    }
  },
  {
    "title": "論理無職の日々",
    "description": "今日のやつ",
    "date": "2018-11-02",
    "url": "20181102",
    "html": "<h1 id=\"論理無職の日々\">論理無職の日々</h1>\n<p><time datetime=\"2018-11-02\">2018-11-02</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>10月15日より有給消化期間の日々を過ごしていました。どこにも\u0010行かずほとんど人とも会わず、ただただ家事などの目先の作業をして記憶と時間を費やしているかのようでした。</p>\n<p>やったことの記録を雑にとっていました。</p>\n<ul>\n<li>部屋の片付けをした<ul>\n<li>シーリングライトを買い替えた</li>\n</ul>\n</li>\n<li><a href=\"https://twitter.com/sezazen\">@sezazen</a> と飲んだ<ul>\n<li>なんかシンボルっぽいバッジをあえて腕時計につけて中学生みたいにイキっていたので注意した</li>\n</ul>\n</li>\n<li>このサイトの日本語の heading 要素に id を付けようとしている<ul>\n<li>仕様で悩んでいる<ul>\n<li>こういうので悩むのすごい久しぶりな気がする</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><a href=\"http://kitakyufes.jp/\">KitaQフェス</a>行った<ul>\n<li>資さんうどんに60分並んだ。途中からうどんそのものには全然興味なくなってたけど後に引けなくなってた。<ul>\n<li>もうわかっただろ。早く俺んちの目の前に店出してくれ。</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p><img src=\"/static/img/posts/20181102_01.jpg=780x1387\" alt=\"img うどん\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<ul>\n<li>保育園に妻と二人でお迎えに行くと子どもにすごい喜ばれる</li>\n<li>平日昼間から、スーパーで買えるちょっと高いビール飲んでる</li>\n<li>けもなれ、登場人物みんな嫌いなんだけど見ていて大丈夫なのだろうか</li>\n<li>衣替えした</li>\n<li>これから三年で引っ越しは必ずするという決意</li>\n<li><a href=\"http://www4.nhk.or.jp/yuran/x/2018-10-25/07/68577/4809372/\">今 NHK-FM でやってるサラーム海上の音楽遊覧飛行</a>が良すぎて出かけられない<ul>\n<li>思わず Spotify でプレイリスト作った<br>(<a href=\"https://open.spotify.com/playlist/4BoqAx514LJww4oWQnzida\">https://open.spotify.com/playlist/4BoqAx514LJww4oWQnzida</a>)</li>\n<li>当サイトで Spotify の埋め込み表示できるようにしよう</li>\n</ul>\n</li>\n<li>横浜に行って修理の上がったサンダルを引き取ってかばのおうどん食べた</li>\n<li>それから渋谷で入社前面談</li>\n<li>北海道物産展行った（渋谷東急と横浜高島屋）<ul>\n<li>ラーメンとお菓子買った</li>\n</ul>\n</li>\n<li>入社書類の事前送付<ul>\n<li>退職証明書の存在を初めて知った</li>\n<li>卒業証明書を Web で発注したら翌日すぐ届いた</li>\n</ul>\n</li>\n<li>レッドタートルの物語見た</li>\n<li><a href=\"http://rakuspa.com/tsurumi/\">鶴見のらくスパ</a>に行った</li>\n<li><a href=\"http://www.yokohama-anpanman.jp/\">アンパンマンミュージアム</a>に行った</li>\n<li>新しい下町ロケット、前作と陸王のいいとこ取りしててなんかズルい<ul>\n<li>いいか悪いかはともかく</li>\n</ul>\n</li>\n<li>「僕らは奇跡でできている」がなんだかんだ落ち着く</li>\n<li>新横浜のラーメン博物館に行った</li>\n</ul>\n<p><img src=\"/static/img/posts/20181102_02.jpg=780x1040\" alt=\"img すみれの味噌ラーメン\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20181102_03.jpg=780x1040\" alt=\"img らーめん味楽の醤油ラーメン\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20181102_04.jpg=780x1040\" alt=\"img こむらさきの豚骨ラーメン\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<ul>\n<li>有給消化期間にこの記事をアップロードするつもりがうっかり有職者になっていた</li>\n</ul>\n<p>やりたかったけどできなかったことも。</p>\n<ul>\n<li>映画もっと見たかった</li>\n<li>もっとうまいもん食いまくったらよかった</li>\n</ul>\n",
    "prevPost": {
      "title": "転職のこと",
      "url": "20181017"
    },
    "nextPost": {
      "title": "ワンス・アポン・ア・タイム・イン金沢",
      "url": "trip-to-kanazawa"
    }
  },
  {
    "title": "転職のこと",
    "description": "今日のやつ",
    "date": "2018-10-17",
    "url": "20181017",
    "html": "<h1 id=\"転職のこと\">転職のこと</h1>\n<p><time datetime=\"2018-10-17\">2018-10-17</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>こんにちは、そういうことです。<br>いわゆる一般的な退職エントリのような熱いキラキラした文章やガッツリした怪文書などは書けそうもないので、転職中に考えていたこと、思ったことなどをまとめておこうと思います。</p>\n<h2 id=\"気持ちとして\">気持ちとして</h2>\n<p>正直、前向きな気持ちだけではないです。というか、円満でネガティブが無かったら転職する必要ないんじゃないですかね。<br>ともあれ順を追うと、「退職したい」という気持ちがまずあってから「転職したい」と思うに至りました。ということでまずは、  </p>\n<ul>\n<li>なぜ退職したいのか</li>\n<li>なぜ転職したいのか</li>\n<li>転職してこの先やってみたいこと</li>\n</ul>\n<p>ということを明文化することにしました（内容はこの記事では割愛）。この三項目は面接・面談での質疑応答の中で毎回必ず話すことを整理するだけだったため、明文化の作業自体はさほど難しいことではありませんでした。</p>\n<h2 id=\"期間と訪問社数\">期間と訪問社数</h2>\n<p>2018 年 8 月 1 日から同年 9 月 14 日に全結果が出るまでで、訪問社数 8 社です。ひと月半ですね。そして訪問社数はやや少ないのかもしれません。また業務後の訪問は週 5 営業日中、3 日までと自分内ルールを設けていましたが、これでも結構忙しく感じました。<br><code>業務後の訪問社数 / 週</code>を制限した理由は、家庭に小さい子どもがおり、訪問した日は妻に夜間のワンオペ育児を強いることになるためです。実際妻からのクレームは多少ありました。3 日という数には何かしら根拠があるわけではありません。気分で決めました。</p>\n<h2 id=\"必ず聞かれたこと\">必ず聞かれたこと</h2>\n<p>どのような会社に転職したいか、どんな軸を持って転職活動しているか、この辺りはどちらの御社でも必ず聞かれました。志望動機に代えて質問している人もいたかと思います。ちなみに、自分もまた業務で面接官をすることがあったのですが、毎回必ず聞く質問でした。<br>この件に関して、求職者としての自分は回答を 2 パターン用意して、相手先のタイプに応じて言い分けていました。片方が嘘というわけではありません。人間の気持ちというのは多面的なものなのです。</p>\n<h2 id=\"訪問時ほぼ必ずいただいたもの\">訪問時ほぼ必ずいただいたもの</h2>\n<p>訪問 8 社中 7 社で 350ml までのペットボトルの水。お茶皆無。紙コップ皆無。特にどうというわけではありませんが、なるほど。</p>\n<h2 id=\"詫びビール\">詫びビール</h2>\n<p>前段でも軽く触れていますが、面談・面接に行くのは業務後の夜間も多く、そういう時は子どもの食事や入浴や寝かしつけなどを全て妻に任せることになりました。その際の<del>クレーム対応として</del>感謝の気持ちを詫び菓子・詫びメシ・詫びビールとして届けることにしていました。</p>\n<h2 id=\"わかる--参考になった系リンク\">わかる / 参考になった系リンク</h2>\n<ul>\n<li><a href=\"https://youkoseki.com/f/moving2018\">転職のお知らせ、あるいは一人のサラリーマンが40を前に考えることについて</a><ul>\n<li>ここから始まる「面接をハックする」シリーズ</li>\n</ul>\n</li>\n<li><a href=\"https://anond.hatelabo.jp/20180912194529\">内定率76%の私が考える面接の必勝パターン【追記アリ】</a><ul>\n<li>これまんまはできないな…</li>\n</ul>\n</li>\n<li><a href=\"https://anond.hatelabo.jp/20181013191517\">転職について(求職側編)</a><ul>\n<li>冒頭のリンクの「採用側編」もめっちゃわかる</li>\n</ul>\n</li>\n</ul>\n<h2 id=\"おわりに、あるいは謝辞\">おわりに、あるいは謝辞</h2>\n<p>とにかく、転職そのものに対する準備は必要だというのは採用側にまわってみて痛感したことでもありましたので、それなりの準備や気持ちの整理は自分史上最もちゃんとやった気がします。<br>実際 <em>「期間と訪問社数」</em> で <code>2018 年 8 月 1 日から</code> と書いていますが、その前にもありがたいことにたまに話を持ちかけられたり選考を受けたりもしていて、結局全て破談していました。その理由のほとんどは上述したような、<em>自分の転職に踏み切るための準備</em> が不足していたためなのだろうなという気がしています。<br>こうしたリファラルやスカウトに関しては破談した際の申し訳なさや、ミスマッチを生み易そうな気が自分にはしたのでかなり慎重に捉えることになりました。お声がけいただいた方、諸々ご協力いただいた方はありがとうございました。</p>\n<p>なんかふわっとした終わり方になったので、いつか追記するかも。</p>\n",
    "prevPost": {
      "title": "amp-lightbox でのアクセシビリティ戦略",
      "url": "amp-lightbox-a11y"
    },
    "nextPost": {
      "title": "論理無職の日々",
      "url": "20181102"
    }
  },
  {
    "title": "amp-lightbox でのアクセシビリティ戦略",
    "description": "AMPで取り組むa11yシリーズ",
    "date": "2018-09-10",
    "url": "amp-lightbox-a11y",
    "html": "<h1 id=\"amp-lightbox-でのアクセシビリティ戦略\">amp-lightbox でのアクセシビリティ戦略</h1>\n<p><time datetime=\"2018-09-10\">2018-09-10</time></p>\n<p><em class=\"description\">AMPで取り組むa11yシリーズ</em></p>\n<h2 id=\"はじめに\">はじめに</h2>\n<p>ちぇーす。<br><a href=\"20180906#-amp\">前回の記事</a>で「何かの折に各コンポーネントのアクセシビリティ検証してみようかしらとか考えています」と書いたのでやってみました。<br>今回は当サイト未対応の amp-lightbox でやってみました。ちょっと使ってみようかなという気持ちはある感じです。</p>\n<h2 id=\"デモ\">デモ</h2>\n<p><a href=\"https://codepen.io/hrfmmymt/pen/xaLoyJ\">amp-lightbox a11y test - codepen</a></p>\n<p>スタイル全くあててないのでわかりづらいかもですが、やりたかったのは基本的にはフォーカス管理です。  </p>\n<h2 id=\"要件\">要件</h2>\n<ol>\n<li>ボタンでパネルを開いたらフォーカスがパネル側に移ること</li>\n<li>パネル側で閉じるボタンをクリックしたら元の画面の開くボタンにフォーカスが戻ること</li>\n<li><code>history.pushState()</code> 的なやつでブラウザバックでパネルが閉じられること</li>\n</ol>\n<p>これが実現できました。</p>\n<h2 id=\"やりかた\">やりかた</h2>\n<p>1. は</p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">amp-lightbox</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;myLightbox1&quot;</span> <span class=\"hljs-attr\">layout</span>=<span class=\"hljs-string\">&quot;nodisplay&quot;</span> <span class=\"hljs-attr\">on</span>=<span class=\"hljs-string\">&quot;lightboxOpen:myLightbox1.focus&quot;</span> <span class=\"hljs-attr\">role</span>=<span class=\"hljs-string\">&quot;dialog&quot;</span>&gt;</span>\n</code></pre>\n<p>の <code>on=&quot;lightboxOpen:myLightbox1.focus&quot;</code> で。</p>\n<p>2. は</p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">on</span>=<span class=\"hljs-string\">&quot;tap:myLightbox1.close, btnLightbox1.focus&quot;</span>&gt;</span>close lightbox 1<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n</code></pre>\n<p>の <code>on=&quot;tap:myLightbox1.close, btnLightbox1.focus&quot;</code> で。</p>\n<p>3. は何もしていません。ビルトインですね。素敵。</p>\n<h2 id=\"おわりに\">おわりに</h2>\n<p>パネルが開いている時にフォーカス移動をパネル内に収めるのは、フル AMP サイトでは自前スクリプト書けないのでできなさそうですね。ここは残念ですけど、すでに issue は開いてるよう。<br><a href=\"https://github.com/ampproject/amphtml/issues/4892\">[A11Y] amp-lightbox should be a modal dialog · Issue #4892 · ampproject/amphtml</a></p>\n<p>今回はここまで。冒頭で「シリーズ」と書いたので、またいつか別のコンポーネントでも検証してみますね。<br>それでは、ご確認のほど何卒よろしくお願いいたします。</p>\n<h2 id=\"参考\">参考</h2>\n<ul>\n<li><a href=\"http://sukoyakarizumu.hatenablog.com/entry/2017/12/03/171400\">WAI-ARIA Authoring Practice Dialog(Modal)のフォーカス管理 - /var/log/sukoyakarizumu</a></li>\n<li><a href=\"https://website-usability.info/2015/07/entry_150706.html\">モーダルウィンドウを考える &mdash; Website Usability Info</a></li>\n<li><a href=\"https://www.slideshare.net/techblogyahoo/scripty05\">アクセシブルなモーダルダイアログの作り方 #scripty05</a></li>\n<li><a href=\"http://d.hatena.ne.jp/neotag/20131202/1385950612\">モーダルダイアログを視覚表現だけで終わらせない - Web Accessibility Advent Calendar 2013 - neotagの雑文</a></li>\n</ul>\n",
    "prevPost": {
      "title": "20180906",
      "url": "20180906"
    },
    "nextPost": {
      "title": "転職のこと",
      "url": "20181017"
    }
  },
  {
    "title": "20180906",
    "description": "amp-videoとかGraphQLとかパフォーマンスやa11yのこととか",
    "date": "2018-09-06",
    "url": "20180906",
    "html": "<h1 id=\"20180906\">20180906</h1>\n<p><time datetime=\"2018-09-06\">2018-09-06</time></p>\n<p><em class=\"description\">amp-videoとかGraphQLとかパフォーマンスやa11yのこととか</em></p>\n<p>こんにちは、冒頭のあいさつが思い浮かばないです。</p>\n<h2 id=\"私と-amp\">私と AMP</h2>\n<p>まずは、<a href=\"20180725#amp-video\">amp-video</a> に対応させました。<code>&lt;video&gt;</code> タグを扱うのがこれまでのキャリア史上初めてだったので、まずその点でかなり新鮮な気持ちを感じられました。<code>poster</code> とか <code>preload</code> とかそんな属性あるんだーみたいな。<br>それにしてもだんだんと amp-components お試しブログの様相を呈してきました。いやーなんでこんな楽しいんだか。ここ数年ずっと JS の日々だった反動でマークアップの喜びを再確認してるのでしょうか。何かの折に各コンポーネントのアクセシビリティ検証してみようかしらとか考えています。</p>\n<h2 id=\"graphql\">GraphQL</h2>\n<p>某所で GraphQL について対話する機会があったのですが、実際触ってはいなかったので Node.js - Express で簡単なサーバーを作ってお試しするところから始めました。そしてイマソコです。ちょうどこのブログで REST のエンドポイントを作ったところでもあったので、比較検討の意味合いで &quot;use GraphQL&quot; みたいなイシューを作ったのですが、ちょっとだるいなと思っているところです。  </p>\n<h2 id=\"パフォーマンスと-a11y\">パフォーマンスと a11y</h2>\n<p>これも某所なんですが、「パフォーマンスは UX の基本」「アクセシビリティは Web に本来備わっている当然のファシリティ」という名言を採取しまして、他所でも自分の言葉みたいに乱用していく所存となりました。<br>あと最近よく思うのは、特定のサービス・特定の企業で「パフォーマンス / a11y やっていくぞ」の姿勢でいく事はとても良い事だとは思うのですが、それだけでは足りない。自分もこれはある種の社会運動なのではないかと思うようになってきました。いちインターネット・ユーザーとしても、あらゆる Web コンテンツに関わるみんなで取り組んでいけたらいいのでは、などと。</p>\n<p>それと北海道での大きな地震が。今はまだうまく言語化できないのですが、自分の仕事としてはやはり Web パフォーマンスと a11y はしっかりやっていくぞという姿勢を正しました。</p>\n<h3 id=\"追記\">追記</h3>\n<p>欲しかったのはこういうやつです。あらためて被災者（親戚）にシェアしました。<br><a href=\"https://news.yahoo.co.jp/story/1081\">【テキスト版】地震・ライフライン情報まとめ</a></p>\n<p><img src=\"/static/img/posts/20180905.png=780x483\" alt=\"画像【テキスト版】地震・ライフライン情報まとめ Lighthouse\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>見づらいけど Lighthouse のスクショ。パフォーマンスが 91 と高得点（環境によって変わるけど）でした。<br>やはりパフォーマンスは UX の基本ですね（早速）。</p>\n",
    "prevPost": {
      "title": "今年のサマーソニックとカマシ・ワシントンのライブに行ってきた",
      "url": "summersonic2018"
    },
    "nextPost": {
      "title": "amp-lightbox でのアクセシビリティ戦略",
      "url": "amp-lightbox-a11y"
    }
  },
  {
    "title": "今年のサマーソニックとカマシ・ワシントンのライブに行ってきた",
    "description": "今日のやつ",
    "date": "2018-08-25",
    "url": "summersonic2018",
    "html": "<h1 id=\"今年のサマーソニックとカマシ・ワシントンのライブに行ってきた\">今年のサマーソニックとカマシ・ワシントンのライブに行ってきた</h1>\n<p><time datetime=\"2018-08-25\">2018-08-25</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<h2 id=\"サマソニ行程\">サマソニ行程</h2>\n<ol>\n<li>七尾旅人</li>\n<li>Nulbarich</li>\n<li>Zion.T</li>\n<li>Higher Brothers</li>\n<li>Jorja Smith</li>\n<li>Chance The Rapper</li>\n<li>Beck</li>\n</ol>\n<p>Beck の直前で <a href=\"https://twitter.com/yoshi_haya\">@yoshi_haya</a> と合流しました。<br>フルで見れたのは Higher Brothers 、Chance The Rapper 、Beck だけか。</p>\n<h2 id=\"サマソニ気持ち\">サマソニ気持ち</h2>\n<ul>\n<li>今思えば Cosmo Pyke 見れた… (<a href=\"https://summer-sonic-e4f01.firebaseapp.com/\">TIMETABLE - SUMMER SONIC 2018</a>)</li>\n<li>Higher Brothers キレッキレでかっこよかった</li>\n<li>チャノ（あえてこう書いてる）とベックは順番逆で派</li>\n<li>動員数あんま興味ない派</li>\n</ul>\n<p>@yoshi_haya と「 BTS と TWICE と（あと誰だっけ）が出ないとな」とか適当に何か話したけど、本当素直にそう思ってます。そういう枠あったよね？ ポリリズム出た頃のパフューム見たの覚えてるんだけど。堂本剛がそれ？<br>ちょっとサブカル / インディ感強いかな…って印象でした。いやなんか感覚が麻痺してるのかもしれん。</p>\n<h2 id=\"平成最後の優勝者\">平成最後の優勝者</h2>\n<p>翌日は Billboard Live TOKYO でカマシ・ワシントンのライブでした。</p>\n<p>ライブの前に 21_21 DESIGN SIGHT で「<a href=\"http://www.2121designsight.jp/program/audio_architecture/\">AUDIO ARCHITECTURE：音のアーキテクチャ展</a>」に行きました。<br>場所が分からなくて、東京ミッドタウンの案内の方に「にいいちにいいちデザインサイト…」と発したところで「トゥーワン・トゥーワン・デザインサイトですね」と言って場所を教えてくれたのが印象深いです。<br>展の中を覗いてから、コーネリアスの AUDIO ARCHITECTURE の7インチを購入しました。15秒までなら動画撮影可とのことだったのでちょこちょこ撮ってました。</p>\n<p>そして、カマシ・ワシントンのライブ。  </p>\n<p><img src=\"/static/img/posts/20180825-01.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20180825-02.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/20180825-03.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>微妙な場違い感を楽しみながら待機してました。始まったらもう最高でした。テーブルと椅子は邪魔。<br>カマシバンドはベースが一番かっこいいなと思っていたんですが、トロンボーンの人もかっこよかったです。バスキアの絵が背中にプリントされたダンガリーシャツ着てました。欲しい。高そうな気がする。知らんけど。</p>\n<p>雰囲気はこんな。</p>\n<p><img src=\"OxzIuLD1R98\" alt=\"embed-youtube\" width=\"0\" height=\"0\" loading=\"lazy\" />\n<small>Kamasi Washington - Truth</small></p>\n<p>最高っしょ。</p>\n<h2 id=\"俺たちの平成最後の夏の終わりに\">俺たちの平成最後の夏の終わりに</h2>\n<p>それでは、僕の後頭部でお別れしましょう。<br>チャノ（あえてこう書いてる）も最高でしたよ。</p>\n<p><img src=\"LZKC3pRzmZk\" alt=\"embed-youtube\" width=\"0\" height=\"0\" loading=\"lazy\" />\n<small>Chance The Rapper - Live at SUMMER SONIC 2018 - Chiba Marine Stadium (JAPAN) - 19/08/2018</small></p>\n",
    "prevPost": {
      "title": "北海道に行ってきました",
      "url": "trip-to-hkd"
    },
    "nextPost": {
      "title": "20180906",
      "url": "20180906"
    }
  },
  {
    "title": "北海道に行ってきました",
    "description": "いつかのやつ",
    "date": "2018-08-22",
    "url": "trip-to-hkd",
    "html": "<h1 id=\"北海道に行ってきました\">北海道に行ってきました</h1>\n<p><time datetime=\"2018-08-22\">2018-08-22</time></p>\n<p><em class=\"description\">いつかのやつ</em></p>\n<p>こんにちは、ワーキングプアです。<br>北海道に行ってきました（1年振り n 度目）。</p>\n<p><img src=\"/static/img/posts/hkd-2018-01.jpg=780x585\" alt=\"羽田空港\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>まずは先に新千歳空港に到着した hrfmmymt 家が空港近くでレンタカーを借りました。娘が慣れない車でキツそうにしていて、生唾ベーと出したりしていました。</p>\n<p><img src=\"/static/img/posts/hkd-2018-02.jpg=780x1040\" alt=\"新千歳空港\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>それから妻の親夫婦と合流して、自分の母の実家に行きました。<br>母、叔父、叔母、従姉妹と合流して「やいの x2」とやるやつをして、これまた何度目かの定山渓ビューホテルへ。娘とプールで遊びました。<br>自ら滑り台にチャレンジしたり、頭から滝に打たれたりするなど一頻り楽しんでいて、プールが苦手じゃないことがわかって良かったです。<br>そのあとは入浴して夕飯なのですが、久しぶりのサウナ &amp; 水風呂で整いまくっていたら全員を待たせてしまっていて気まずかったです。ただなぜかあまり整えなくて、今思えばこの時から若干不調だったのかもと思ったりも（後述）。<br>そして一泊。初日終わり。</p>\n<p>二日目は墓参りミッションがあったのでしました。娘初の墓参り。前年は車内で爆睡していたのでした。墓から車に戻る途中で、ギラッギラした黄色と青のトカゲを目撃しました。娘と妻にも報告したのですが、普通に流された気がします。「へえ」みたいな。「へえ」じゃないんだよ。</p>\n<p>そして母、叔父、叔母、従姉妹と別れて車で洞爺〜函館方面へ向かいます。旅程的にはこっちがメイン。</p>\n<p>適当に写真をご覧ください。</p>\n<p><img src=\"/static/img/posts/hkd-2018-03.jpg=780x1040\" alt=\"何か\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-04.jpg=780x1040\" alt=\"何か近影\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-05.jpg=780x1040\" alt=\"いももち\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-06.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-07.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-08.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-09.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-10.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-11.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-12.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><a href=\"http://www.ichinomatsu.co.jp/\">旅館一乃松</a>に到着。いいところでした。義父の趣味をガッツリ抑えた妻のチョイスが冴え渡ったのでは。中庭に入ってみたかった。</p>\n<p><img src=\"/static/img/posts/hkd-2018-14.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>夕食をとってからタクシーで函館山に行きました。運転手がちょっと不安になるくらい親切で、道中のガイドはもちろんのこと、到着後にはデジカメで写真を撮りまくってコンビニで現像して渡してくれました。ありがとう（木々たちよ）。</p>\n<p><img src=\"/static/img/posts/hkd-2018-15.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>翌朝は朝市へ。三日目となります。函館の朝市の雰囲気はなんとなく、人の多い韓国の済州島を想起させられましたが、まあ漁港つながりって感じでしょうか。<br>それはともかく、おいしいイカが食べられます。個人的な今回の旅行の楽しみ事項は、完全にイカだけでした。これはいやがうえにも、イカが食べれて嬉しい僕の体の一部がホットになっていくというものです。  </p>\n<p>〜またしばらく写真をご覧ください。</p>\n<p><img src=\"/static/img/posts/hkd-2018-17.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-18.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-19.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-20.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-21.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-22.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-23.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-24.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-25.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-26.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-27.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-28.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-29.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-30.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-31.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-32.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-33.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-34.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>そのあとは洞爺湖に移動しました。目的は、この時期毎日打ち上げているという花火を旅館から眺めるためです。  </p>\n<p><img src=\"/static/img/posts/hkd-2018-35.jpg=780x1040\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-36.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><img src=\"/static/img/posts/hkd-2018-37.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>だったのですが夜になり、娘の体調不良というアクシデントが発生しました。<br>夜ごろから熱が 39℃ ほどまで上がり、翌朝から病院をいくつか電話をかけて（その日は日曜日）なんとか見つけた、車で 20 分ほどの小児科を受診しました。医師にこの日に東京に帰るという旨を話すと、点滴を受けることになりました。そのおかげか、ほどなくして体温は 37℃ 台までには下がり、一安心はできました。しかし万全には及ばず、娘から笑顔が一切失われ半日ほど真顔のまま過ごしていました。</p>\n<p>実は娘、振り返って 1~2ヶ月前に今回とかなり似たような症状で（やはり日曜だったので）休日急患診療所にかかっていました。風邪からくる胃腸炎的な診断でしたが、その日はたまたま自分のワンオペ日だったので狼狽しました。<br>で、今回は旅先でという。症状の既視感はあったんですが、まあ、大変。。いろいろありますわな。</p>\n<p>慣れない乗用車による、長時間・長距離移動で疲れが出たのでしょうか。ごめんね。よくがんばったね。</p>\n<p>そして四日目のこの日は東京への戻り日なので、レンタカーを返却して新千歳空港へ。写真をあまり撮っていないので記憶が薄いです。<br>自分たちの乗る東京行きの飛行機は18 時頃発で、昼過ぎに妻の両親の福岡行きを見送ってからは、買い物や<a href=\"http://www.new-chitose-airport.jp/ja/doraemon/\">ドラえもん</a>や<a href=\"http://www.new-chitose-airport.jp/ja/happy-flight/\">ハローキティ</a>のイベントスペース的なやつを見て回るなどして過ごしました。<br>フライトまでには娘の気分も落ち着いた様子で、一時間ほど離陸が遅れつつも無事帰京しました。よかった。</p>\n<p>それとこれは後日談のようなもので、帰宅した翌日には掛かりつけの病院に娘を連れて行くことにしたのですが、自分も体調が悪くなってしまい診察を受けることになりました。親子ともども風邪でした。会社は 2 日間休みました。<br>最後は大変でしたが、概ね満喫できた旅行でした。</p>\n<p>最後に、帰りの飛行機の機内誌にあった星占いを紹介してみます。<br>まずは自分の魚座。</p>\n<p><img src=\"/static/img/posts/hkd-2018-38.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<blockquote>\n<p>初めてのことが多くドキドキやワクワクがいっぱいの星回り。お誘いも受けてくださいね。ただし少しでも嫌な予感がした時はやめておくのが正解。<br>ラッキーワード：夏祭り、花火、コンサート<br>ラッキーカラー：向日葵色<br>ラッキーな方角：北東</p>\n</blockquote>\n<p>続いて娘の（さそり座の女）。</p>\n<p><img src=\"/static/img/posts/hkd-2018-39.jpg=780x585\" alt=\"\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<blockquote>\n<p>用心は健康運。疲れをためないように体のケアを丁寧にしましょう。レジャーも無理は禁物。対人関係では懐かしい交際が復活するなど嬉しいことあり。<br>ラッキーワード：海や湖、絵はがき<br>ラッキーカラー：水色<br>ラッキーな方角：西南西</p>\n</blockquote>\n<blockquote>\n<p>用心は健康運。</p>\n</blockquote>\n<p>おせえわ。</p>\n<p>おしまい。</p>\n",
    "prevPost": {
      "title": "markdown から amp-img で webp 表示＆フォールバックのやつした",
      "url": "md-amp-img-webp"
    },
    "nextPost": {
      "title": "今年のサマーソニックとカマシ・ワシントンのライブに行ってきた",
      "url": "summersonic2018"
    }
  },
  {
    "title": "markdown から amp-img で webp 表示＆フォールバックのやつした",
    "description": "これのやつ",
    "date": "2018-08-14",
    "url": "md-amp-img-webp",
    "html": "<h1 id=\"markdown-から-amp-img-で-webp-表示＆フォールバックのやつした\">markdown から amp-img で webp 表示＆フォールバックのやつした</h1>\n<p><time datetime=\"2018-08-14\">2018-08-14</time></p>\n<p><em class=\"description\">これのやつ</em></p>\n<h2 id=\"皆さまお疲れ様です\">皆さまお疲れ様です</h2>\n<p>まずは GEZAN の新曲を聞いてお疲れの身体をリセットしましょう。どうぞ。</p>\n<p><img src=\"7_n9DdSFrjE\" alt=\"embed-youtube\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>\u0010はい。<br>こんにちは、技術ブログです。このブログ自体の実装はまだまだ続けているので、記事が日報的になっていきます。</p>\n<p>ということで、今回は当サイトの画像表示に webp を使うことにしました。それにあたって、</p>\n<ol>\n<li>画像最適化タスクに webp 書き出しを追加</li>\n<li>Markdown での画像挿入により webp および、非対応ブラウザ ( Google Chrome 以外ということですね ) へのフォールバックタグ出力</li>\n</ol>\n<p>の作業を行いました。</p>\n<p>1. に関してはプロジェクトルート側の package.json のスクリプトで呼び出して使っている、画像最適化用の Node.js ユーティリティ関数の修正で対応しました。<br>修正内容としては、それまでに書いていた Jimp による最適化を行なった後に <a href=\"https://github.com/imagemin/imagemin-webp\">imagemin-webp</a> によるコンバートの処理の書き足しです。</p>\n<p>2. は Firebase Cloud Functions で行なっていた Markdown パーサーの出力処理修正で対応しました。</p>\n<p>ということで、こう入力すると</p>\n<p><code>![alt](PATH/TO/IMG.jpg)</code></p>\n<p>こんな感じで出力されます。</p>\n<pre><code>&lt;amp-img src=&quot;PATH/TO/IMG.webp&quot; width=&quot;100&quot; height=&quot;100&quot; alt=&quot;alt&quot;&gt;\n  &lt;amp-img fallback src=&quot;PATH/TO/IMG.jpg&quot; width=&quot;100&quot; height=&quot;100&quot; alt=&quot;alt&quot;&gt;\n  &lt;/amp-img&gt;\n&lt;/amp-img&gt;\n</code></pre>\n<p>やったぜ。</p>\n",
    "prevPost": {
      "title": "amp-list でこのサイトの最新記事 n 件をリスト表示する",
      "url": "amp-list"
    },
    "nextPost": {
      "title": "北海道に行ってきました",
      "url": "trip-to-hkd"
    }
  },
  {
    "title": "amp-list でこのサイトの最新記事 n 件をリスト表示する",
    "description": "これのやつ",
    "date": "2018-08-11",
    "url": "amp-list",
    "html": "<h1 id=\"amp-list-でこのサイトの最新記事-n-件をリスト表示する\">amp-list でこのサイトの最新記事 n 件をリスト表示する</h1>\n<p><time datetime=\"2018-08-11\">2018-08-11</time></p>\n<p><em class=\"description\">これのやつ</em></p>\n<ol>\n<li>このサイトの記事の API エンドポイントを作る</li>\n<li><a href=\"https://hrfmmymt.github.io/\">別の AMP サイト</a>で <code>amp-list</code> コンポーネントを使ってこのサイトに上がった記事のタイトルとリンクをリスト表示する</li>\n</ol>\n<p>というのをやりました。</p>\n<p><code>amp-list</code> の XMLHttpRequest で取得するデータは Cross-Origin Resource Sharing 対応しなければならないので、しました ( バックエンドは Cloud Functions for Firebase ) 。これ (<a href=\"https://github.com/ampproject/amphtml/blob/master/spec/amp-cors-requests.md\">amphtml/amp-cors-requests.md at master · ampproject/amphtml</a>) を参考にしました。</p>\n<p>API 実装はここまでで、あとは公式ドキュメント ( <a href=\"https://www.ampproject.org/docs/reference/components/amp-list\">amp-list – AMP</a> ) を参考に<a href=\"https://hrfmmymt.github.io/\">別の AMP サイト</a>側で <code>amp-list</code> の実装を適当にやったら適当に全リスト表示できたので、あとは微調整です。<br>もともと &quot;recent posts&quot; というくくりで、最新の記事 5 件だけが表示されればよしと考えていたのでリストの表示数の制御できないかなと前述のドキュメントくまなく見直してみたら、下の方に <a href=\"https://www.ampproject.org/docs/reference/components/amp-list#validation\">Validation</a> という項目を発見しました。で、そこの <a href=\"https://github.com/ampproject/amphtml/blob/master/extensions/amp-list/validator-amp-list.protoascii\">amp-list rules</a> というリンク先のソースコードに <a href=\"https://github.com/ampproject/amphtml/blob/master/extensions/amp-list/validator-amp-list.protoascii#L102\">attrs: { name: &quot;max-items&quot; }</a> という記述があったので、これかと思って勘で以下のように書いてみたら当たりでした。</p>\n<pre><code class=\"language-html\"><span class=\"hljs-comment\">&lt;!-- 最新の 5 件のみ表示 --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">amp-list</span> <span class=\"hljs-attr\">max-items</span>=<span class=\"hljs-string\">&quot;5&quot;</span> <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;auto&quot;</span> <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;120&quot;</span> <span class=\"hljs-attr\">layout</span>=<span class=\"hljs-string\">&quot;fixed-height&quot;</span>&gt;</span>\n</code></pre>\n<p>やったぜ。</p>\n",
    "prevPost": {
      "title": "TypeScript はじめました",
      "url": "20180808"
    },
    "nextPost": {
      "title": "markdown から amp-img で webp 表示＆フォールバックのやつした",
      "url": "md-amp-img-webp"
    }
  },
  {
    "title": "TypeScript はじめました",
    "description": "これのやつ",
    "date": "2018-08-08",
    "url": "20180808",
    "html": "<h1 id=\"typescript-はじめました\">TypeScript はじめました</h1>\n<p><time datetime=\"2018-08-08\">2018-08-08</time></p>\n<p><em class=\"description\">これのやつ</em></p>\n<p>表題のとおり、TypeScript を使うことにしました。<br>ということで特に他に書くことないので、備忘録だけ置いておくことにします。当方の JavaScript のソース状況としては Cloud Functions for Firebase での <code>functions/index.js</code> のみでした。</p>\n<pre><code class=\"language-sh\"><span class=\"hljs-built_in\">cd</span> <span class=\"hljs-built_in\">functions</span>\n</code></pre>\n<pre><code class=\"language-sh\">yarn add -D typescript tslint\n</code></pre>\n<p><em>package.json</em></p>\n<pre><code class=\"language-json\">&quot;scripts&quot;: {\n  &quot;tslint&quot;: &quot;tslint --project tsconfig.json&quot;,\n  &quot;tsc&quot;: &quot;tsc&quot;,\n  ...\n</code></pre>\n<p><em>tsconfig.json</em></p>\n<pre><code class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;compilerOptions&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;lib&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;es6&quot;</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;module&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;commonjs&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;noImplicitReturns&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">true</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;outDir&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;./&quot;</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;sourceMap&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">true</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;target&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;es6&quot;</span>\n  <span class=\"hljs-punctuation\">}</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;compileOnSave&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-keyword\">true</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;include&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;src&quot;</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n  <span class=\"hljs-attr\">&quot;exclude&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;node_modeles&quot;</span><span class=\"hljs-punctuation\">]</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>\n<pre><code>cp -f index.js src/index.ts\n</code></pre>\n<p><small>既存のソース <code>functions/index.js</code> を丸ごと <code>functions/src/index.ts</code> にコピー&amp;ペースト</small></p>\n<pre><code class=\"language-sh\">yarn tsc\nerror Property <span class=\"hljs-string\">&#x27;~~~&#x27;</span> does not exist on <span class=\"hljs-built_in\">type</span> <span class=\"hljs-string\">&#x27;{}&#x27;</span>.\nerror Property <span class=\"hljs-string\">&#x27;~~~&#x27;</span> does not exist on <span class=\"hljs-built_in\">type</span> <span class=\"hljs-string\">&#x27;{}&#x27;</span>.\nerror Property <span class=\"hljs-string\">&#x27;~~~&#x27;</span> does not exist on <span class=\"hljs-built_in\">type</span> <span class=\"hljs-string\">&#x27;{}&#x27;</span>.\nerror Property <span class=\"hljs-string\">&#x27;~~~&#x27;</span> does not exist on <span class=\"hljs-built_in\">type</span> <span class=\"hljs-string\">&#x27;{}&#x27;</span>.\nerror Property <span class=\"hljs-string\">&#x27;~~~&#x27;</span> does not exist on <span class=\"hljs-built_in\">type</span> <span class=\"hljs-string\">&#x27;{}&#x27;</span>.\n...\n</code></pre>\n<p>以上エラー処理して完了。<br>やったぜ。</p>\n",
    "prevPost": {
      "title": "いいやつの作りかた",
      "url": "20180730"
    },
    "nextPost": {
      "title": "amp-list でこのサイトの最新記事 n 件をリスト表示する",
      "url": "amp-list"
    }
  },
  {
    "title": "いいやつの作りかた",
    "description": "これのやつ",
    "date": "2018-07-30",
    "url": "20180730",
    "html": "<h1 id=\"いいやつの作りかた\">いいやつの作りかた</h1>\n<p><time datetime=\"2018-07-30\">2018-07-30</time></p>\n<p><em class=\"description\">これのやつ</em></p>\n<h2 id=\"はじめに\">はじめに</h2>\n<p>こんにちは、おうちフジロッカーです。YouTube のフジロックの配信で巻き戻し再放送見てたところ、誤操作でリロードして即配信終了となりました。ダーティー・プロジェクターズ途中だったのに。はい。</p>\n<p>さて巷には、不定期的にブログを作る習性を持つ者が一定数おられるかと思いますが、私もその一人です。<br>今までにも WordPress、tumblr のカスタム、Jekyll、Gatsby など、お試しレベルから実運用に至るまで、様々なテンションでブログを扱ってまいりました。プログラミングを介さないものも含むともっとあると思います。なぜだかはわかりません。<br>皆様がご覧になられているこれもその一つである、理由もなくただ産み落とされた新しいブログです。今回はその作りかたを記事にします。</p>\n<h2 id=\"構成\">構成</h2>\n<p>このブログは静的サイトジェネレーターで、markdown ファイルを Web サーバーでパースして HTML ファイルをホスティングするという仕組みが基礎となって出来ています。前述した Jekyll もそのうちの一つで、様々な人による様々な使われ方が想定してある優れたツールです。他の類似品として Hugo や Hexo などが挙げられます。ただ、今回は自分のブログが作りたかっただけなので、自分だけが良ければそれで良いというつもりでイチから手書きすることにしました。</p>\n<h3 id=\"バックエンド\">バックエンド</h3>\n<p>Cloud Functions for Firebase + Firebase Hosting を使っています。<br>ホスティングをどうするか考えた際に、もともと Node.js + Express で書き始めていたのもあり、ホスティング・サービスも一元で扱える Firebase を選びました。<br>そうそう、Cloud Functions for Firebase はもともと Node.js を扱ってはいたのですが対応バージョンが古く、現行の新しいバージョンに対応している新しい処理記法が使えませんでした。それが以前の記事でも書きましたが、数日前に新バージョンに対応したというのも後押しになりました。最新というわけではないのですけれどね。</p>\n<p>Firebase Hosting は CircleCI と連携し、ビルド後に自動でデプロイされるようにしています。  </p>\n<p>テンプレートエンジンは mustache を使っています。一時期 EJS だったり、Nunjucks 見たり（結局 <a href=\"https://github.com/hrfmmymt/webper\">webper</a> という webp の画像コンバーターで使いました）、あんまりこだわりはない部分ですね。</p>\n<h3 id=\"フロントエンド\">フロントエンド</h3>\n<p>フロントエンドはスタイルシートで意匠を作る以外ほぼ何もすることがなさそうな気がしてたので <a href=\"https://www.ampproject.org/ja/\">AMP</a> にしました。インデックスページと記事ページの行き来の想定しかない Web サイトにおいて、発生する UX の懸念というのは「表示が速いか遅いか」だけであろうという雑なデザイン思考です。<br>画像を amp-img というコンポーネントを使わないと AMP として認定されないので markdown パーサーライブラリを拡張して、markdown から <code>&lt;amp-img&gt;</code> にパースさせるようにしています。ちなみに、画像の最適化には <a href=\"https://github.com/oliver-moran/jimp\">Jimp</a> という Node.js のライブラリを使っています。<br>また、ノリで amp-install-serviceworker というコンポーネントを使って PWA 化もしています。PWAMP ですね。AMP as PWA ですね。<br>他には一応 amp-social-share というコンポーネントでソーシャル・シェア・ボタンの設置をしています。今後は外部サービスの embed 表示のコンポーネントを使ってみようかなという気分でいます。</p>\n<p><img src=\"/static/img/posts/20180730-01.png=780x461\" alt=\"有効な AMP ページですドヤ画像\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p><small><a href=\"https://search.google.com/test/amp?id=ZklJjOweBq3q7ShDW4a7XA\">AMP テスト結果</a></small></p>\n<p>そんなわけで、Web パフォーマンスにはそれなりには気を遣っているつもりでおりまして、<a href=\"https://developers.google.com/web/fundamentals/performance/prpl-pattern/?hl=ja\">PRPL Pattern</a> というのにも一応目配せしていたりもします。Push、Render、Pre-cache、Lazy-load の頭文字を取ったというものですが、当ブログでの対応と合わせて見ていきます。</p>\n<h4 id=\"push--render\">Push / Render</h4>\n<p>これは Critical Rendering Path (ページの初期描画みたいな) の最適化するぞということのようで、外部 CSS のインライン化 ( <code>&lt;style&gt;&lt;/style&gt;</code> ) や HTTP/2 の Push 配信や、必要リソース取得の最適化・優先度付けなどが代表的なものとして挙げられますね。<br>当ブログではスタイルのインライン化は <a href=\"https://www.ampproject.org/ja/docs/design/responsive_amp\">AMP のルール</a>で、HTTP/2 対応は Firebase Hosting により、リソース取得最適化は Google Fonts (しかない) を <a href=\"https://www.w3.org/TR/resource-hints/\">Resource Hints</a> で実現しています。</p>\n<h4 id=\"pre-cache\">Pre-cache</h4>\n<p>Service Worker で記事リソースの先読みをしています。当ブログではハマりどころが多かったです。Workbox でハマり、Cloud Functions / Hosting での静的リソースのパス付けにハマり（これは Node.js か)。。</p>\n<h4 id=\"lazy-load\">Lazy-load</h4>\n<p>画像だけ対応しています。しかも <code>&lt;amp-img&gt;</code> なので勝手に。markdown は対応していません。検討課題でしょうか。</p>\n<h2 id=\"その他\">その他</h2>\n<p><a href=\"https://github.com/hrfmmymt/iiyatsu\">hrfmmymt/iiyatsu</a><br>あとはコードフォーマットに prettier 使ったり、textlint で文書校正したりしてます。他なんかやったら随時。</p>\n<ul>\n<li><a href=\"/posts/20180808\">TypeScriptはじめました - 20180808</a></li>\n<li><a href=\"/posts/amp-list\">amp-list でこのサイトの最新記事 n 件をリスト表示する - 20180811</a></li>\n<li><a href=\"/posts/md-amp-img-webp\">markdown から amp-img で webp 表示＆フォールバックのやつした - 20180814</a></li>\n</ul>\n<h2 id=\"おわりに\">おわりに</h2>\n<p>特にフロントエンド側はそんな書くことないだろうと思って書き進めてみたら疲れました。同時に、検討課題もまだまだあるのが見えてきました。<br>最後に Lighthouse のドヤスクショでお別れしましょう。さようなら。</p>\n<p><img src=\"/static/img/posts/20180730-02.png=780x130\" alt=\"Lighthouse ドヤ画像\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n",
    "prevPost": {
      "title": "おーい御社",
      "url": "20180727"
    },
    "nextPost": {
      "title": "TypeScript はじめました",
      "url": "20180808"
    }
  },
  {
    "title": "おーい御社",
    "description": "今日のやつ",
    "date": "2018-07-27",
    "url": "20180727",
    "html": "<h1 id=\"おーい御社\">おーい御社</h1>\n<p><time datetime=\"2018-07-27\">2018-07-27</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>こんにちは、この頃二歳の娘に「オムツ替えてあげる。トイレ行こうね」など言われることがあります。</p>\n<p>まずは当手作りブログの本日の進捗から (<a href=\"https://iiyatsu.hrfmmymt.com/posts/20180725#todo\">https://iiyatsu.hrfmmymt.com/posts/20180725#todo</a>)<br>サーバーサイドをあまりよく考えずに Node.js (Express) で作っていて、非同期処理でもあまりよく考えずに async/await を使ってたところ、Cloud Functions for Firebase がベータ版じゃなくなって Node.js v8 ランタイム（こっちはベータ版）対応したという<a href=\"https://firebase.google.com/docs/functions/manage-functions\">ブレイキング・ニュース</a>が（それまでは v6.11.5）。これは機運だぞということで Firebase の Cloud Functions と Hosting に対応させました。<br>あとは <a href=\"https://www.ampproject.org/docs/reference/components/amp-social-share\">amp-social-share</a> 導入したりとか細々と。実は当ブログ、<a href=\"https://www.ampproject.org/ja/docs/integration/pwa-amp\">PWA と AMP に対応</a>してるのでその辺もおいおい書いていきましょう。</p>\n<p>さて最近、少し思うところがあり各種転職サービスのプロフィールの更新を細かく行なっています。御社、見ていますか？ ここに高い流動性がいます。私はあなた方を見ていますよ。</p>\n<h2 id=\"20180917追記\">2018/09/17追記</h2>\n<p>現在では御社への呼びかけは止めております。ご協力いただいた方々には御礼申し上げます。<br>はあ疲れた。</p>\n",
    "prevPost": {
      "title": "amp-img",
      "url": "20180726"
    },
    "nextPost": {
      "title": "いいやつの作りかた",
      "url": "20180730"
    }
  },
  {
    "title": "amp-img",
    "description": "markdown",
    "date": "2018-07-26",
    "url": "20180726",
    "html": "<h1 id=\"amp-img\">amp-img</h1>\n<p><time datetime=\"2018-07-26\">2018-07-26</time></p>\n<p><em class=\"description\">markdown で amp-img を表示する</em></p>\n<p>〜ために marked.js の override を使用した。</p>\n<pre><code class=\"language-javascript\"><span class=\"hljs-keyword\">const</span> renderer = <span class=\"hljs-keyword\">new</span> marked.<span class=\"hljs-title class_\">Renderer</span>()\n\n<span class=\"hljs-keyword\">const</span> <span class=\"hljs-title function_\">sanitize</span> = str =&gt; {\n  <span class=\"hljs-keyword\">return</span> str.<span class=\"hljs-title function_\">replace</span>(<span class=\"hljs-regexp\">/&amp;&lt;&quot;/g</span>, <span class=\"hljs-function\"><span class=\"hljs-params\">m</span> =&gt;</span> {\n    <span class=\"hljs-keyword\">if</span> (m === <span class=\"hljs-string\">&#x27;&amp;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&amp;amp;&#x27;</span>\n    <span class=\"hljs-keyword\">if</span> (m === <span class=\"hljs-string\">&#x27;&lt;&#x27;</span>) <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&amp;lt;&#x27;</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&#x27;&amp;quot;&#x27;</span>\n  })\n}\n\nrenderer.<span class=\"hljs-property\">image</span> = <span class=\"hljs-function\">(<span class=\"hljs-params\">src, title, alt</span>) =&gt;</span> {\n  <span class=\"hljs-keyword\">const</span> exec = <span class=\"hljs-regexp\">/=\\s*(\\d*)\\s*x\\s*(\\d*)\\s*$/</span>.<span class=\"hljs-title function_\">exec</span>(src)\n  <span class=\"hljs-keyword\">let</span> regExp\n  <span class=\"hljs-keyword\">if</span> (exec &amp;&amp; exec[<span class=\"hljs-number\">0</span>]) regExp = <span class=\"hljs-keyword\">new</span> <span class=\"hljs-title class_\">RegExp</span>(exec[<span class=\"hljs-number\">0</span>], <span class=\"hljs-string\">&#x27;g&#x27;</span>)\n  <span class=\"hljs-keyword\">const</span> mySrc = src.<span class=\"hljs-title function_\">replace</span>(regExp, <span class=\"hljs-string\">&#x27;&#x27;</span>)\n  <span class=\"hljs-keyword\">let</span> res = <span class=\"hljs-string\">`&lt;amp-img src=&quot;<span class=\"hljs-subst\">${mySrc}</span>&quot; alt=&quot;<span class=\"hljs-subst\">${sanitize(alt)}</span>`</span>\n  <span class=\"hljs-keyword\">if</span> (exec &amp;&amp; exec[<span class=\"hljs-number\">1</span>]) res += <span class=\"hljs-string\">`&quot; width=&quot;<span class=\"hljs-subst\">${exec[<span class=\"hljs-number\">1</span>]}</span>`</span>\n  <span class=\"hljs-keyword\">if</span> (exec &amp;&amp; exec[<span class=\"hljs-number\">2</span>]) res += <span class=\"hljs-string\">`&quot; height=&quot;<span class=\"hljs-subst\">${exec[<span class=\"hljs-number\">2</span>]}</span>`</span>\n  <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">`<span class=\"hljs-subst\">${res}</span>&quot; layout=&quot;responsive&quot;&gt;`</span>\n}\n\n---\n\n<span class=\"hljs-title function_\">marked</span>(md, { <span class=\"hljs-attr\">renderer</span>: renderer })\n</code></pre>\n<p>参照元: <a href=\"https://github.com/markedjs/marked/issues/339#issuecomment-172230403\">https://github.com/markedjs/marked/issues/339#issuecomment-172230403</a><br>この通りに <code>スペース=100x100</code> の指定でしたかったが、仕様変更があったのかスペース含みだと <code>&lt;img&gt;</code> 用の第一引数 ( 上例だと src ) が取れなかったので、スペース無しで指定する処理を書いた。</p>\n<pre><code>![atama](/static/img/posts/20180726.jpg=536x536)\n</code></pre>\n<p><img src=\"/static/img/posts/20180726.jpg=536x536\" alt=\"atama\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">amp-img</span> <span class=\"hljs-attr\">alt</span>=<span class=\"hljs-string\">&quot;atama&quot;</span>\n  <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/static/img/posts/20180726.jpg&quot;</span>\n  <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;536&quot;</span>\n  <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;536&quot;</span>\n  <span class=\"hljs-attr\">layout</span>=<span class=\"hljs-string\">&quot;responsive&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">amp-img</span>&gt;</span>\n</code></pre>\n",
    "prevPost": {
      "title": "hello, world!",
      "url": "20180725"
    },
    "nextPost": {
      "title": "おーい御社",
      "url": "20180727"
    }
  },
  {
    "title": "hello, world!",
    "description": "はじめのごあいさつ",
    "date": "2018-07-25",
    "url": "20180725",
    "html": "<h1 id=\"hello-world\">hello, world!</h1>\n<p><time datetime=\"2018-07-25\">2018-07-25</time></p>\n<p><em class=\"description\">はじめのごあいさつ</em></p>\n<p>オイース！ それじゃあ、いっぱい書くね。</p>\n<h2 id=\"amp-img\">amp-img</h2>\n<p><img src=\"/static/img/posts/20180725.jpg=780x1040\" alt=\"eye-catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<h2 id=\"amp-youtube\">amp-youtube</h2>\n<pre><code>![embed-youtube](vI8cDhfSiNE)\n</code></pre>\n<p><img src=\"vI8cDhfSiNE\" alt=\"embed-youtube\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<h2 id=\"amp-soundcloud\">amp-soundcloud</h2>\n<pre><code>![embed-soundcloud](8679644)\n</code></pre>\n<p><img src=\"8679644\" alt=\"embed-soundcloud\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<h2 id=\"amp-instagram\">amp-instagram</h2>\n<pre><code>![embed-instagram](BkfJtE7hFt-)\n</code></pre>\n<p><img src=\"BkfJtE7hFt-\" alt=\"embed-instagram\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<h2 id=\"amp-video\">amp-video</h2>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;amp-video-wrapper&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">amp-video</span> <span class=\"hljs-attr\">controls</span>\n    <span class=\"hljs-attr\">preload</span>=<span class=\"hljs-string\">&quot;metadata&quot;</span>\n    <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;640&quot;</span>\n    <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;360&quot;</span>\n    <span class=\"hljs-attr\">layout</span>=<span class=\"hljs-string\">&quot;responsive&quot;</span>\n    <span class=\"hljs-attr\">poster</span>=<span class=\"hljs-string\">&quot;/static/videos/poster/test.png&quot;</span>\n    <span class=\"hljs-attr\">title</span>=<span class=\"hljs-string\">&quot;video-test&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">source</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/static/videos/webm/test.webm&quot;</span>\n      <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;video/webm&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">source</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;/static/videos/test.mp4&quot;</span>\n      <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;video/mp4&quot;</span> /&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">fallback</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">p</span>&gt;</span>This browser does not support the video element.<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">p</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">amp-video</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n</code></pre>\n<div class=\"amp-video-wrapper\">\n  <amp-video controls\n    preload=\"metadata\"\n    width=\"640\"\n    height=\"360\"\n    layout=\"responsive\"\n    poster=\"/static/videos/poster/test.png\"\n    title=\"video-test\">\n    <source src=\"/static/videos/webm/test.webm\"\n      type=\"video/webm\" />\n    <source src=\"/static/videos/test.mp4\"\n      type=\"video/mp4\" />\n    <div fallback>\n      This browser does not support the video element.\n    </div>\n  </amp-video>\n</div>\n\n<pre><code class=\"language-sh\">![video-test](/static/videos/test.mp4=640x360)\n</code></pre>\n<p><img src=\"/static/videos/test.mp4=640x360\" alt=\"video-test\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<pre><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">amp-iframe</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD&quot;</span>\n  <span class=\"hljs-attr\">sandbox</span>=<span class=\"hljs-string\">&quot;allow-scripts allow-same-origin&quot;</span>\n  <span class=\"hljs-attr\">width</span>=<span class=\"hljs-string\">&quot;300&quot;</span>\n  <span class=\"hljs-attr\">height</span>=<span class=\"hljs-string\">&quot;380&quot;</span>\n  <span class=\"hljs-attr\">frameborder</span>=<span class=\"hljs-string\">&quot;0&quot;</span>\n  <span class=\"hljs-attr\">allow</span>=<span class=\"hljs-string\">&quot;encrypted-media&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">amp-iframe</span>&gt;</span>\n</code></pre>\n<p><amp-iframe src=\"https://open.spotify.com/embed/user/hrfmmymt/playlist/4rmnvhEv080DI0AX0XqfqD\"\n  sandbox=\"allow-scripts allow-same-origin\"\n  width=\"300\"\n  height=\"380\"\n  frameborder=\"0\"\n  allow=\"encrypted-media\"></amp-iframe></p>\n",
    "prevPost": {
      "title": "20180623",
      "url": "20180623"
    },
    "nextPost": {
      "title": "amp-img",
      "url": "20180726"
    }
  },
  {
    "title": "20180623",
    "description": "今日のやつ",
    "date": "2018-06-23",
    "url": "20180623",
    "html": "<h1 id=\"20180623\">20180623</h1>\n<p><time datetime=\"2018-06-23\">2018-06-23</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>ツイートまとめになりそう。\n日中ずっと雨の日。娘は微熱もあり、一切外出せず。\n娘の昼寝を促している時「アレ見たいのー」と、親指を立てて上下に振る仕草をして DA PUMP の USA の上映を要求されて、YouTube でリピート再生してる最中に昼寝した。</p>\n<p><amp-youtube\n  data-videoid=\"sr--GVIoluU\"\n  layout=\"responsive\"\n  width=\"480\" height=\"270\"></amp-youtube></p>\n<p>それから、妻子を置いてお出かけした。自分のTシャツと娘のスカートを買った。子供服専門でない店で 90 サイズから置いているのは珍しい気がする。\n店でレインポンチョを見ていいなと思って、チェックし始めた。<a href=\"http://kiu-worldparty.jp/\">Kiu</a> というのが良さそう。\n食品など買って帰宅。今は W 杯韓国 - メキシコを見てる。</p>\n<p>女性エンジニアをネタにした人を批判した人を批判する人の中にそのイベントに参加した 20 代エンジニアもいるらしくて、その時に批判できなかった、あるいは批判的になれなかった自分に刺さったのだろうか。そこに現代日本における「政治的な態度」というか、「後付けの党派性」みたいなものを感じた。人として、感情から一定の政治的態度をとることは全くの無にはできないと思うけど、エンジニアとしてはきつくコントロールする必要があると思う。でなければ、まともなものが作れなくなる。ターゲットはぶれさせないで、ダメなものはダメだという評価軸は保たなければならない。これは品質管理に置き換えるとわかりやすい。その彼らに対してはエンジニアやめろとは言わずとも、その職は向いてはいないのではないかという気持ちではいる。何か別のやり方で自分の居心地の良い組織を守り、成長させていくことができればそれがいいのだろうと思った。この先それが可能であれば、だが。</p>\n",
    "prevPost": {
      "title": "20180621",
      "url": "20180621"
    },
    "nextPost": {
      "title": "hello, world!",
      "url": "20180725"
    }
  },
  {
    "title": "20180621",
    "description": "今日のやつ",
    "date": "2018-06-21",
    "url": "20180621",
    "html": "<h1 id=\"20180621\">20180621</h1>\n<p><time datetime=\"2018-06-21\">2018-06-21</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>いつもと違う朝。普段より早く登園・出勤の支度が済んだ。<br>娘が産まれた日のことを思い出しながら出勤した。</p>\n<p><img src=\"/static/img/posts/20180621-01.jpg=780x439\" alt=\"img eye catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>まだ分かっていないようだったので、社内で以下をシェアした。\n<a href=\"http://www.outlinenone.com/\">CSS outline property - outline: none and outline: 0</a><br><a href=\"https://frasco.io/writing-css-with-accessibility-in-mind-4fc82b26aecb\">アクセシビリティを意識した CSS の書き方 - Frasco</a><br>旅館・ホテルや旅客機などは全ての人が利用できるようにサービスが設計されている。そのため、旅館・ホテルや旅客機などを商材として扱う場合は、全ての人が利用できるようなサービス設計を念頭に置くべきだし、そもそも Web は設計以前に、そういった思想をすでに持っている。</p>\n<p><img src=\"/static/img/posts/20180621-02.jpg=780x1040\" alt=\"img\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>娘が撮った。レンズを指で大いに覆って。</p>\n",
    "prevPost": {
      "title": "20180614",
      "url": "20180614"
    },
    "nextPost": {
      "title": "20180623",
      "url": "20180623"
    }
  },
  {
    "title": "20180614",
    "description": "今日のやつ",
    "date": "2018-06-14",
    "url": "20180614",
    "html": "<h1 id=\"20180614\">20180614</h1>\n<p><time datetime=\"2018-06-14\">2018-06-14</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>最近なぜか娘によるパパ弾圧が厳しくて、事ある毎に漫画のようなむくれ顔を向けられるのだけれど、それがまあ可愛くてもっと欲しくなっていじり続けてしまっている。ただこれはツンデレのようなものか、膨らんだ頬を両手で挟んで口内に貯めた空気を「ぶー」と吐き出させるとたまらず笑ってしまったり、寝るときには結局自分の腕の中に来たりする。</p>\n<p><img src=\"/static/img/posts/20180614.jpg=780x585\" alt=\"img eye catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>消灯した寝室で娘が、「今日はお家で、あれ吊るしたの。あれ」<br>「何？ あれって？」<br>そう言うと熟睡している母の方へ転がっていき、しばらくして戻って「今日はお家でてるてる坊主吊るしたの」と、なんか思い出したらしく教えてくれた。\n明日は保育園で、妻がママ先生として保育参加する日で楽しみにしているよう。晴れたらいいね。</p>\n<p>「モンテ・クリスト伯」、楽しかったですね。Pitchfork 式評価だと 7.4 なのは変わらず。できれば海外ドラマのように数年かけて、ゆっくりじわじわと進めてほしかった。せめて、この最終回は二週に分けてほしかった（無駄にギャグ回のような印象を残してしまった）。W杯か。\n読もう。 <a href=\"http://news.nicovideo.jp/watch/nw3539414\">桜井ユキが語る『モンテ・クリスト伯』愛梨の抱える想いと切なさ</a></p>\n<p>それでは、服を着ます。</p>\n",
    "prevPost": {
      "title": "20180610",
      "url": "20180610"
    },
    "nextPost": {
      "title": "20180621",
      "url": "20180621"
    }
  },
  {
    "title": "20180610",
    "description": "今日のやつ",
    "date": "2018-06-10",
    "url": "20180610",
    "html": "<h1 id=\"20180610\">20180610</h1>\n<p><time datetime=\"2018-06-10\">2018-06-10</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>この時間から書くのは厳しい。\n1:41AM。断続的な雨により外出せず。\n積み木で椅子を作り、アンパンマンやアフラックの鴨などの人形類を並べて記念撮影をしまくった。\n娘による、「寝る寝る（と言っておもちゃ等の片付けをせずひたすら時間を浪費させ続けるある種の）詐欺」の被害に遭った。</p>\n<p><img src=\"/static/img/posts/20180610.jpg=780x1386\" alt=\"img eye catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>食器を洗いながら「ワンオペ育児とは何か」と考えていた。子どもに向き合う自分はたった一人だから、この孤独というのもまた山では感じない、街でのみ感じられるものなのだろうかみたいな。あるいは作業として、子どもとだけ向き合っていさえすれば他のことはおざなりでもいいという態度だとワンオペ育児認定されないのでは、とか。そういった育児マウンティングについてとか。なんだろう。2:00AMの思考では言語化しきれていない。</p>\n<p>娘が昼寝している間（し始めたのは13時40分ごろだったろうか）に当（前のです 20180728追記）ブログのメンテを行っていた。<br>画像最適化に Jimp というライブラリを使っているのだが、JPG 形式の画像だけ90°回転してしまう現象の修正ができた。</p>\n<!-- textlint-disable -->\n<p>娘が起きたら、作業終了。「YOUは何しに日本へ」の再放送をいいだけ見て、「おかいつ」のファミリーコンサートの後半部だけ見て、飯作っていい感じのチャーハンができて、他は微妙で、ママが帰ってきて風呂入って、娘寝て、「ブラックペアン」見て、渡海先生の「腕のない医者は死ね」という発言には医者という職業の持つ責任とかリスクとかを強く感じさせるよなとか思ったりしていて。ショッキングな台詞ではあるけれど、生き死にに直結するような職業だからこそ、こんな風に思われることも珍しくないのでは、とか。あと人間の生き死にに近い職業は何だろう、軍人、裁判官、弁護士、検察官、警察官、とか。もしかしたら俳優、ミュージシャンといったいわゆる芸人はそこから対局にあるのでは、とか。  </p>\n<!-- textlint-disable -->\n<p>そして、なんか時間を過ごし、久しぶりに「ゲーム・オブ・スローンズ」を見て今に至る。</p>\n",
    "prevPost": {
      "title": "20180609",
      "url": "20180609"
    },
    "nextPost": {
      "title": "20180614",
      "url": "20180614"
    }
  },
  {
    "title": "20180609",
    "description": "今日のやつ",
    "date": "2018-06-09",
    "url": "20180609",
    "html": "<h1 id=\"20180609\">20180609</h1>\n<p><time datetime=\"2018-06-09\">2018-06-09</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>テルミーワーイ、ワーイ、ソー、ワーイ、<strong>俺ーー</strong>\nどうもモンテクリスト太郎です。\n今日は母の退職祝いに品プリの飯屋で昼飯。\n今日はおばあちゃんとは微妙な距離感の娘。おばあちゃんが手を繋ごうと促すと、露骨におばあちゃん側の手を後ろに隠すという。そして着きしなにさっと寝ましたね。昼食、蟹汁舐めたくらいなんじゃないの。</p>\n<p><img src=\"/static/img/posts/20180609-01.jpg=780x585\" alt=\"img eye catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>人類というのは飯食ったらとりあえず帰宅するようプログラムされてるはずなんですが、そのまま水族館に行きました。</p>\n<p><img src=\"/static/img/posts/20180609-02.jpg=780x585\" alt=\"img went aquarium\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>行ったら娘起床。魚見てウェーイして。イルカショーでウェーイしました。もうちょっと大きくなったら水被り席行こう。</p>\n<p><img src=\"/static/img/posts/20180609-03.png=780x439\" alt=\"img went aquarium\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>帰宅してちょっと休んでお買い物。</p>\n<p>夕食作って、2~3週間くらい冷凍して放置してた鮭とアジの開きがだいぶいい具合で焼き上げることができたのでもう天才。ベーコンとエリンギとアスパラガスの焼き物は失敗しました。\nで、食事の際に「鮭めちゃくちゃ美味しいよ」と言ってみたら娘が影響されて、やおら鮭を食べ始めて「めちゃくちゃおいしい」と言うブームが巻き起こりました。</p>\n<p>風呂ではパパのちんちんの下に桶を差し込んで、「パパ、チッチしてー」「お腹に力入れてー」と言われながら納豆に塗れた彼女の頬を拭っていました。\nそして録画したタモリ倶楽部を見たり、孤独のグルメをオンライン視聴するなどして、今に至ると。</p>\n<p>最高気温30℃を越えた、6月にしては暑い日でした。</p>\n",
    "prevPost": {
      "title": "20180607",
      "url": "20180607"
    },
    "nextPost": {
      "title": "20180610",
      "url": "20180610"
    }
  },
  {
    "title": "20180607",
    "description": "今日のやつ",
    "date": "2018-06-07",
    "url": "20180607",
    "html": "<h1 id=\"20180607\">20180607</h1>\n<p><time datetime=\"2018-06-07\">2018-06-07</time></p>\n<p><em class=\"description\">今日のやつ</em></p>\n<p>娘、朝起きたらオムツ全く湿ってなくてトイレでおしっこしてた。朝食は「自分で食べるの」と言って自分で食べてた。という旨を保育園の連絡帳に書いた。</p>\n<p>業務に採用の比重が大きくなってきた。最近採用に関するドキュメントを書き始めた。制作より先に共有を始めた。</p>\n<p>帰宅すると、娘が一人椅子に座り、なぜかうちわを持って「おかあさんといっしょ」の「ぴぴハピー」を見て熱中していた。入浴を促すも眠いのか、機嫌が悪そう。入浴した。「おおきなかぶ」を読んだ。寝た。</p>\n<p>「モンテ・クリスト伯」クソやべえ。ファンタジーの設定にツッコミを入れて嗤うフェーズは完全に終わり、乗っかって楽しむしかないと思う。原作もあの通りなんだろうか。おディーンの「Echo」、ドラマ終わる前にリリースして欲しかった。ドラマは Pitchfork 式評価だと7.4。</p>\n<p><img src=\"/static/img/posts/20180607.jpg=780x1040\" alt=\"eye catch\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n",
    "prevPost": {
      "title": "preact-cli でポートフォリオサイトを作った",
      "url": "20180606"
    },
    "nextPost": {
      "title": "20180609",
      "url": "20180609"
    }
  },
  {
    "title": "preact-cli でポートフォリオサイトを作った",
    "description": "ギジュツテキ",
    "date": "2018-06-06",
    "url": "20180606",
    "html": "<h1 id=\"preact-cli-でポートフォリオサイトを作った\">preact-cli でポートフォリオサイトを作った</h1>\n<p><time datetime=\"2018-06-06\">2018-06-06</time></p>\n<p><em class=\"description\">ギジュツテキ</em></p>\n<h2 id=\"はじめに\">はじめに</h2>\n<p>ポートフォリオという呼称の使い方はよくわかってないので職務経歴書とでもいいましょうか、そういったものにあたる Web サイトをこの度制作し、公開しております。<br>実は以前にも同じようなプロットで Web サイトを制作・公開していたので (<a href=\"https://hrfmmymt.github.io/skillsheet/\">https://hrfmmymt.github.io/skillsheet/</a>) 、今回はある意味リニューアルとも言えるプロジェクトとなっています。</p>\n<p>以前のサイト制作当時は、もう <a href=\"https://github.com/hrfmmymt/skillsheet/commit/dba37d68e2c749707a85f86215f9a5e456c20cfb\">丸四年以上前</a> のこととなるのですが、それは各所で業務委託に勤しんでいた頃のことです。業務委託マンとしての業務の一つとして取引先担当者に自分の概要を示すために <code>職務経歴書.xls</code> （ファイル名は当記事での便宜上のものです）を更新するというものがあるのですが、その業務というのが自分にとっては非常につまらないもので、なんとか自分の過去を前向きに振り返ることができないかと思った次の瞬間には GitHub でリポジトリを新規作成していました。そのまま半日ほど作業をし、GitHub Pages でホスティングして完成したのは非常に簡素なペライチサイトでした。</p>\n<p><img src=\"/static/img/posts/20180606-01.jpg=700x444\" alt=\"img 前のポートフォリオサイトトップ画面\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>そして今、改めて職歴サイトを再開発して公開しようと思ったのもいくつかのきっかけがあります。まず大きな一つとしては、自分の現在の所属企業にて、以前よりも深く採用に関わるようになったことがあります。<br>求職活動において用意する履歴書や職務経歴書といったいわば定型の書類は誰もが用意することと思いますが、我々のような技術職の場合、自らのスキルを示すためにコードや制作物を添えるというのが必須ではないにせよ、ある種の暗黙の了解のように扱われていると思っています。いや、思っていました。そういうものでもなかったという所感を持ったということです。いやいや、もっと作ればいいのに。もっと公開すればいいのに。という気持ちではあります。うーむ。<br>まあ、そんなようなのとか他にもいろいろがあって、丸四年前に一筆書きで作ったサイトの新バージョンを作ってみようと思い立ったのです。<br>それがこちら <a href=\"https://hrfmmymt.com\">https://hrfmmymt.com</a> 。ここから先は技術的な解説パートとします。</p>\n<p><img src=\"/static/img/posts/20180606-02.jpg=700x388\" alt=\"img 新しいポートフォリオサイトトップ画面\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<h2 id=\"preact-cli\">preact-cli</h2>\n<p>もうタイトルにしてしまっているのですが、<a href=\"https://github.com/developit/preact-cli\">preact-cli</a> というツールにどっかりと乗っかっています。ざっくり言うと、この &quot;30 秒で PWA を始められる&quot; スターターで雛形を作って、あとはデザインとその他別途の作業をしていった感じです。すでに挙がっている PWA をはじめ、Preact による SPA 構築についてなど個々の技術トピックについての解説などはできるだけ最小限に抑えたり、省いたりしつつ、本項では雛形作成以降に行った作業の記録を申し訳程度で以下に記しておきます。こういう時は<a href=\"https://github.com/hrfmmymt/portfolio\">リポジトリ</a>を見るといいですね。<br>まずは CSS から追っていきましょうか。</p>\n<h3 id=\"クリティカル・レンダリング・パス-css-最適化\">クリティカル・レンダリング・パス CSS 最適化</h3>\n<p>これには、<a href=\"https://github.com/matthewlynch/preact-cli-plugin-critical-css\">matthewlynch/preact-cli-plugin-critical-css</a> を使用しました。ただただ、滅茶苦茶お手軽でしたという感想しかないです。元になってる <a href=\"https://github.com/anthonygore/html-critical-webpack-plugin\">anthonygore/html-critical-webpack-plugin</a> という webpack プラグインなんかは、某ギョームサービスで投入してみたいなーという気持ちにもなりました。</p>\n<h3 id=\"css-modules\">CSS Modules</h3>\n<p>これは preact-cli デフォルトなんですが、例外的に書いておこうかと思います。はい、preact-cli 公式デフォルトは CSS Modules を採用しています。自分の好みとしては CSS in JS の特に styled-components だったのですが、SSR するなら自分でプラグインを書かないとなーと思いつつググってみたら <a href=\"https://github.com/robinvdvleuten/preact-cli-plugin-styled-components\">robinvdvleuten/preact-cli-plugin-styled-components</a> が出てきて「🤔」の顔になりました（作業当時は 2 commits）。とりあえず CSS Modules のまま書いています。↑はまだ試してないのです。</p>\n<p>追記。その後試してみたんですが、この issue ( <a href=\"https://github.com/robinvdvleuten/preact-cli-plugin-styled-components/issues/1\">Doesn&#39;t work on the latest version of preact-cli · Issue #1 · robinvdvleuten/preact-cli-plugin-styled-components</a> ) と同じ現象にハマり、もういいやとなりました。</p>\n<h3 id=\"css-その他\">CSS その他</h3>\n<p>あとは申し訳程度の Autoprefixer と prettier による整形くらいです。自動リンターは別にいらんと思いました。</p>\n<h3 id=\"js-testing\">JS Testing</h3>\n<p>そもそも preact-cli による JS 実装を振り返ると、そこまで複雑なデザインを要求されるサイトではなかったので <a href=\"https://preactjs.com/\">Preact</a> による React-Components と 仮想 DOM だけあればよく、さらに &quot;-cli&quot; によりルーティングと SSR と PWA というセットが簡単かつ軽量かつほぼ無思考で実装できたのが良かったなと思います。<br>ただ preact-cli は現状は、テストまでは付いてこないので自前で用意する必要がありました。とはいえテストコードはまだ TODO という形ですね。とりあえずは動くことが確認できたくらいです（このままやらないパティーンですかね）。<br>CI は CircleCI (これも自前で用意)、あとは Prettier と ESLint の --fix 連携とか。JS に関しては以上。</p>\n<h3 id=\"pwa\">PWA</h3>\n<p>これも基本はほとんどやることないはずなんですけど、service-worker.js の生成にデフォルトで sw-precache を使用しているので、workbox を使いたいとかあったらカスタムする必要があります。自分は <a href=\"https://github.com/prateekbh/preact-cli-sw-precache\">prateekbh/preact-cli-sw-precache</a> を使用しています。カスタム目的としては 404.html を ignore するとかです。</p>\n<p><img src=\"/static/img/posts/20180606-03.jpg=700x474\" alt=\"img 404 のスクリーンショット\" width=\"0\" height=\"0\" loading=\"lazy\" /></p>\n<p>泣いてるように見えるかもしれませんが、いないいないばあの「いないいない中」です。</p>\n<h3 id=\"その他\">その他</h3>\n<p>一応ドメイン取って、Firebase でホスティングしています。<br>それとこれは開発技術にはあたらないですが、長らく愛用していた Sublime Text とは本件でお別れして、Visual Studio Code に乗り換えました。</p>\n<p><a href=\"https://developers.google.com/speed/pagespeed/insights/?hl=ja&amp;url=https%3A%2F%2Fhrfmmymt.com\">PageSpeed Insights</a> はこう。</p>\n<p><img src=\"/static/img/posts/20180606-04.jpg=700x445\" alt=\"img PageSpeed Insights のスクリーンショット\" width=\"0\" height=\"0\" loading=\"lazy\" />\n<small>PC / SP 共に 90 超えの様子です。</small></p>\n<h3 id=\"おわりに\">おわりに</h3>\n<p>書き切りました。とりあえず。</p>\n",
    "prevPost": {
      "title": "0",
      "url": "0"
    },
    "nextPost": {
      "title": "20180607",
      "url": "20180607"
    }
  },
  {
    "title": "0",
    "description": "enable",
    "date": "1999-09-11",
    "url": "0",
    "html": "<h1 id=\"0\">0</h1>\n<p><time datetime=\"1999-09-11\">1999-09-11</time></p>\n<p><em class=\"description\">enable sort</em></p>\n<h2 id=\"h2\">h2</h2>\n<p>0000000</p>\n",
    "prevPost": {
      "title": "h1",
      "url": "1"
    },
    "nextPost": {
      "title": "preact-cli でポートフォリオサイトを作った",
      "url": "20180606"
    }
  },
  {
    "title": "h1",
    "description": "wei",
    "date": "1999-09-09",
    "url": "1",
    "html": "<h1 id=\"h1\">h1</h1>\n<p><time datetime=\"1999-09-09\">1999-09-09</time></p>\n<p><em class=\"description\">wei</em></p>\n<h2 id=\"h2\">h2</h2>\n<pre><code class=\"language-javascript\">marked.<span class=\"hljs-title function_\">setOptions</span>({\n  <span class=\"hljs-attr\">renderer</span>: <span class=\"hljs-keyword\">new</span> marked.<span class=\"hljs-title class_\">Renderer</span>(),\n  <span class=\"hljs-attr\">highlight</span>: <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\">code, lang</span>) {\n    <span class=\"hljs-keyword\">const</span> hljs = <span class=\"hljs-built_in\">require</span>(<span class=\"hljs-string\">&#x27;highlight.js&#x27;</span>)\n    <span class=\"hljs-keyword\">const</span> language = hljs.<span class=\"hljs-title function_\">getLanguage</span>(lang) ? lang : <span class=\"hljs-string\">&#x27;plaintext&#x27;</span>\n    <span class=\"hljs-keyword\">return</span> hljs.<span class=\"hljs-title function_\">highlight</span>(code, { language }).<span class=\"hljs-property\">value</span>\n  },\n  <span class=\"hljs-attr\">pedantic</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">gfm</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">breaks</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">sanitize</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">smartLists</span>: <span class=\"hljs-literal\">true</span>,\n  <span class=\"hljs-attr\">smartypants</span>: <span class=\"hljs-literal\">false</span>,\n  <span class=\"hljs-attr\">xhtml</span>: <span class=\"hljs-literal\">false</span>\n})\n<span class=\"hljs-comment\">// https://marked.js.org/using_advanced</span>\n</code></pre>\n<ul>\n<li>list1</li>\n<li>list2</li>\n</ul>\n",
    "prevPost": null,
    "nextPost": {
      "title": "0",
      "url": "0"
    }
  }
]